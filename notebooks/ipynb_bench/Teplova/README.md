# Бенчмарк RAG системы

Этот инструмент позволяет сравнивать производительность различных моделей эмбеддингов и алгоритмов поиска для Retrieval-Augmented Generation (RAG) систем.

## Возможности

- Сравнение различных моделей эмбеддингов (SentenceTransformer)
- Сравнение с классическим TF-IDF подходом
- Оценка скорости и точности поиска
- Визуализация результатов в виде графиков
- Поддержка различных алгоритмов поиска (Exact Search, HNSW)

## Требования

- Python 3.10+
- Qdrant (запущенный локально или удаленно)
- Необходимые библиотеки (см. `requirements.txt`)

## Установка

```bash
# Установка зависимостей
pip install -r requirements.txt
```

## Использование

### Базовый запуск

```bash
python client.py
```

### Параметры командной строки

```bash
python client.py --model-names all-MiniLM-L6-v2 paraphrase-multilingual-MiniLM-L12-v2 TF-IDF --limit 100
```

### Основные параметры

| Параметр | Описание | Значение по умолчанию |
|----------|----------|------------------------|
| `--model-names` | Список моделей для сравнения | `all-MiniLM-L6-v2 paraphrase-multilingual-MiniLM-L12-v2 TF-IDF` |
| `--limit` | Максимальное количество записей для использования | `100` |
| `--qdrant-host` | Хост Qdrant сервера | `localhost` |
| `--qdrant-port` | Порт Qdrant сервера | `6333` |
| `--collection-name` | Название коллекции в Qdrant | `rag` |

### Параметры HNSW

| Параметр | Описание | Значение по умолчанию |
|----------|----------|------------------------|
| `--hnsw-ef` | Параметр ef для HNSW | `16` |
| `--hnsw-m` | Параметр m для HNSW (количество соседей) | `16` |
| `--ef-construct` | Параметр ef_construct для HNSW | `200` |

## Примеры использования

### Сравнение конкретных моделей

```bash
python client.py --model-names all-MiniLM-L6-v2 paraphrase-multilingual-MiniLM-L12-v2
```

### Только TF-IDF анализ

```bash
python client.py --model-names TF-IDF
```

### Увеличение размера тестовой выборки

```bash
python client.py --limit 1000
```

### Настройка параметров HNSW

```bash
python client.py --hnsw-ef 128 --hnsw-m 32 --ef-construct 400
```

## Результаты

Результаты бенчмарка сохраняются в следующих местах:

- Логи: `./logs/client.log` и `./logs/bench.log`
- Графики: `./logs/graphs/`

## Структура проекта

- `client.py` - основной скрипт для запуска бенчмарка
- `bench.py` - функции для оценки производительности и визуализации
- `read_data_from_csv.py` - функции для чтения данных

## Примечания

- Для корректной работы необходим запущенный сервер Qdrant
- Первый запуск может занять больше времени из-за загрузки моделей
- Для больших наборов данных рекомендуется увеличить значение `--batch-size` 